#include "scop.h"

t_mat4	m_rotmatrix_quat(t_float4 q)
{
	t_mat4	m;

	m_identity(&m);
	m.d[0] = 1.0 - 2.0 * (q[1] * q[1] + q[2] * q[2]);
	m.d[1] = 2.0 * (q[0] * q[1] - q[2] * q[3]);
	m.d[2] = 2.0 * (q[2] * q[0] + q[1] * q[3]);
	m.d[4] = 2.0 * (q[0] * q[1] + q[2] * q[3]);
    m.d[5] = 1.0 - 2.0 * (q[2] * q[2] + q[0] * q[0]);
    m.d[6] = 2.0 * (q[1] * q[2] - q[0] * q[3]);
	m.d[8] = 2.0 * (q[2] * q[0] - q[1] * q[3]);
    m.d[9] = 2.0 * (q[1] * q[2] + q[0] * q[3]);
    m.d[10] = 1.0 - 2.0 * (q[1] * q[1] + q[0] * q[0]);
	return (m);
}